{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Compliance Rule",
  "type": "object",
  "properties": {
    "id": {"type":"string"},
    "authority": {"type":"string"},
    "section_title": {"type":"string"},
    "clause_reference": {"type":"string"},
    "short_description": {"type":"string"},
    "technical_check": {"type":"object",
      "description":"Machine-checkable rule information",
      "properties":{
        "type":{"type":"string","enum":["keyword","numeric","presence","spatial","regex","custom"]},
        "field_path":{"type":"string","description":"path in OCR output or parsed BIM data, e.g., plan.labels.corridor.width"},
        "operator":{"type":"string","enum":[">=",">","<=","<","=","in","not_in","present","matches"]},
        "value":{"type":["string","number","array","null"]},
        "units":{"type":"string"},
        "example_text_matches":{"type":"array","items":{"type":"string"}}
      },
      "required":["type","field_path","operator"]
    },
    "human_review_required":{"type":"boolean"},
    "severity":{"type":"string","enum":["info","warning","critical"]},
    "confidence":{"type":"number","minimum":0,"maximum":1},
    "raw_clause_text":{"type":"string"},
    "notes_for_reviewer":{"type":"string"}
  },
  "required":["id","authority","short_description","technical_check"]
}
